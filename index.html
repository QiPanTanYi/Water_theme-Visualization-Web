<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta charset="UTF-8" />
    <title>⚗</title>
    <link rel="stylesheet" href="./Website File/File/css/index.css" />
    <link rel="stylesheet" href="./Website File/File/css/Music.css" />
    <link rel="stylesheet" href="./Website File/File/css/head.css" />
  </head>
  <body>
    <!-- 加入内容 -->
    <!-- 落雨 -->
    <div id="rainBox"></div>
    <div id="rainBox"></div>
    <div id="rainBox"></div>
    <div id="rainBox"></div>

      <!-- 先行页面 -->
      <div id="headMax">
        <div class="headLogo">
          <img src="./Website File/File/image/HeadLogo.png" alt="开题文字" />
        </div>
        <div class="headBtn">
          <div class="bottle">
            <div class="water"></div>
          </div>
        </div>
        <div class="headWood">
          <img src="./Website File/File/image/Wood.png" alt="跳跳条" />
          <img src="./Website File/File/image/Wood.png" alt="跳跳条" />
          <img src="./Website File/File/image/Wood.png" alt="跳跳条" />
          <img src="./Website File/File/image/Wood.png" alt="跳跳条" />
          <img src="./Website File/File/image/Wood.png" alt="跳跳条" />
          <img src="./Website File/File/image/Wood.png" alt="跳跳条" />
          <img src="./Website File/File/image/Wood.png" alt="跳跳条" />
          <img src="./Website File/File/image/Wood.png" alt="跳跳条" />
          <img src="./Website File/File/image/Wood.png" alt="跳跳条" />
          <img src="./Website File/File/image/Wood.png" alt="跳跳条" />
          <img src="./Website File/File/image/Wood.png" alt="跳跳条" />
          <img src="./Website File/File/image/Wood.png" alt="跳跳条" />
          <img src="./Website File/File/image/Wood.png" alt="跳跳条" />
        </div>
        <p>* 请点击水瓶查看数据！</p>
      </div>
      <div id="one-them">
        <!-- 背景音乐区 -->
        <div class="bgMusic">
          <img src="./Website File/File/image/H2O.jpg" alt="Logo" />
          <div class="music">
            <img class="coin" src="./Website File/File/image/coin1.png" alt="播放/暂停" />
            <audio
              src="./Website File/File/music/Shelter (Piano version).mp3"
              loop="loop"
              autoplay="autoplay"
            >
              当前浏览器不支持audio
            </audio>
          </div>
          <span>
            <p>&nbsp《Shelter (Piano)》</p>
          </span>
          <img id="colpng" src="./Website File/File/image/col.png" alt="下划线" />
        </div>
        <!-- 标题区 -->
        <div id="titleWord">
          <img src="./Website File/File/image/title.png" alt="" />
        </div>
        <!-- 加入内容 -->
        <div id="them">
          <div id="main">
            <div id="images">
              <div id="images2"></div>
            </div>
            <div id="left">
              <div id="table-bar"></div>
              <div id="line-jiangyu"></div>
            </div>
            <div id="right">
              <div id="map">
                <div class="backBtn" id="backBtn"></div>
                <div class="echart" id="worldMap"></div>
              </div>
              <div id="bottom">
                <div id="table-line"></div>
                <div id="table-pie"></div>
              </div>
            </div>
            <div id="bar2"></div>
          </div>
          <!-- 页面2 -->
          <!-- 人体 -->
        </div>
        <div id="two-them">
          <div id="two-main">
            <div id="two-left">
              <!-- 按钮 -->
              <div id="dvback"></div>
              <div id="two-titile">
                <div>人体主要器官含水占比</div>
              </div>
              <div id="two-pie">
                <div id="two-pie1"></div>
                <div id="two-pie2"></div>
                <div id="two-pie3"></div>
                <div id="two-pie4"></div>
                <div id="two-pie5"></div>
                <div id="two-pie6"></div>
              </div>
            </div>
            <div id="two-right">
              <div id="two-renti"></div>
              <div id="two-image">
                <!-- 轮播图片 -->
                <div id="Carousel">
                  <div class="Carousel-box" id="Carousel-box1">
                    <img src="./Website File/File/image/ciyun.png" alt="词云">
                </div>
                </div>
                <!-- 文字说明 description-->
                <div id="description">
                  <img src="./Website File/File/image/coo.png" alt="">
              
                  
                </div>
                
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- 页面3 -->
      <!-- 水污染 -->
      <div id="three-them">
        
        <div id="three-main">
          <!-- 上 -->
          <div id="three-top">
            <div id="three-btn"></div>
            <div id="three-top1">
              <div id="wuran-title"><p>主要污染源</p></div>
              <div id="wuranyuan1">
                <div id="wuranyuan11" onclick="navigateToChemistry(1)"></div>
              </div>
              <div id="wuranyuan2">
                <div id="wuranyuan22" onclick="navigateToChemistry(1)"></div>
              </div>
              <div id="wuranyuan3">
                <div id="wuranyuan33" onclick="navigateToChemistry(1)"></div>
              </div>
            </div>
            <div id="three-top2"></div>
            <div id="three-top3">
              <div id="guocheng-title"><p>污染过程</p></div>
              <div id="guocheng"></div>
            </div>
          </div>
          <!-- 下 -->
          <div id="three-bottom">
            <div id="three-bottom1">
              <div id="yufan1"></div>
            </div>
            <div id="three-bottom2">
              <div id="yufan2"></div>
            </div>
          </div>
        </div>
      </div>

      <!-- 页面4  淡水点击页面-->
      <div id="four-them">
        <div id="four-main">
          <!-- 返回按钮 -->
          <div id="four-left">
            <div id="four-dvback"></div>
          </div>
          <div id="four-title">
            <img src="./Website File/File/image/DS-title.png" alt="">
          </div>
          <div id="four-bottom">
            <div id="b-1">
              <img id="image1" src="./Website File/File/img4/TS+1.png">
            </div>
            <div id="b-2">
              <div id="b-2-1">
                <img id="image2" src="./Website File/File/img4/TS+5.png">
              </div>
              <div id="b-2-2">
                <img id="image3" src="./Website File/File/img4/TS+3.png">
              </div>
            </div>
            <div id="b-3">
              <div id="b-3-1">
                <img id="image4" src="./Website File/File/img4/TS+4.png">
              </div>
              <div id="b-3-2">
                <img id="image5" src="./Website File/File/img4/TS+6.png">
              </div>
            </div>
            <div id="b-4">
              <img id="image6" src="./Website File/File/img4/TS+2.png">
            </div>

          </div>
        </div>
      </div>
    
      
    </div>
    <script src="./Website File/File/js/jquery-3.6.1.js" charset="utf-8"></script>
    
    <script src="./Website File/File/js/echarts.min.js"></script>
    <script src="./Website File/File/js/china.js"></script>
    <script src="./Website File/File/js/there.js"></script>
    <script src="./Website File/File/js/index.js"></script>
    <script src="./Website File/File/js/head.js"></script>
    <script src="./Website File/File/js/four.js"></script>
    <script src="./Website File/File/js/five.js"></script>
    <script src="./Website File/File/js/contaminate.js"></script>
    <script src="./Website File/File/js/MusicAndRain.js"></script>
    

    <script>
      var provinces = {
        //数据
        台湾: "taiwan",
        河北: "hebei",
        山西: "shanxi",
        辽宁: "liaoning",
        吉林: "jilin",
        黑龙江: "heilongjiang",
        江苏: "jiangsu",
        浙江: "zhejiang",
        安徽: "anhui",
        福建: "fujian",
        江西: "jiangxi",
        山东: "shandong",
        河南: "henan",
        湖北: "hubei",
        湖南: "hunan",
        广东: "guangdong",
        海南: "hainan",
        四川: "sichuan",
        贵州: "guizhou",
        云南: "yunnan",
        陕西: "shanxi1",
        甘肃: "gansu",
        青海: "qinghai",
        新疆: "xinjiang",
        广西: "guangxi",
        内蒙古: "neimenggu",
        宁夏: "ningxia",
        西藏: "xizang",
        北京: "beijing",
        天津: "tianjin",
        上海: "shanghai",
        重庆: "chongqing",
        香港: "xianggang",
        澳门: "aomen",
      };
      var isReturnChina = false; //是否显示返回中国地图
      function chinaMapHidden(chinaMap) {
        let that = this;
        chinaMap.off("click"); //这里解决多次触发点击事件 但是还会执行2次  引用echarts地图，点击各个省份时，点击一个调用两次接口，再点击一次，调用四次接口，再点击调用八次。。。。依次叠加，问题在于，没有将地图上的点击事件清空
        chinaMap.on("click", async function (params) {
          $("#left").css("height", "500px");
          $("#table-bar").css("display", "none");
          $("#bottom").css("display", "none");
          $("#bar2").css("display", "block");
          $("#line-jiangyu").css("display", "block");
          $("#images").css("display", "none");
          if (provinces.hasOwnProperty(params.name)) {
            newMapFu(params.name);
          }
        });
      }
      //加载各省地图
      function newMapFu(mapName) {
        if (mapName=="台湾"){
          mapName=None
        }
        var nameEn = provinces[mapName];
        var js = document.createElement("script");
        js.src = "./File/js/province/" + nameEn + ".js";
        document.body.appendChild(js);
        setTimeout(function () {
          $("#backBtn").addClass("active");
          worldMap(mapName);
        }, 100);
        console.log(mapName);
        paramsname(mapName);
      }
      //返回中国地图
      $("#backBtn").on("click", function () {
        $("#left").css("height", "820px");
        $("#table-bar").css("display", "block");
        $("#bottom").css("display", "flex");
        $("#bar2").css("display", "none");
        $("#backBtn").removeClass("active");
        $("#line-jiangyu").css("display", "none");
        $("#images").css("display", "block");
        worldMap("china");
      });
      function getMapJson(mapName) {
        var def = $.Deferred();
        var url =
          "http://175.178.223.138:555/json/province/" + mapName + ".json";
        $.ajax({
          type: "get",
          url: url,
          data: {},
          dataType: "json",
          success: function (data) {
            if (data.status == "STATUS_SUCCESS") {
              def.resolve(data);
              def.promise(data);
            } else if (data.status == "STATUS_FAIL") {
              def.resolve(data);
              def.promise(data);
            } else {
              def.resolve(data);
              def.promise(data);
            }
          },
          error: function (data) {
            def.reject(data);
            def.promise(data);
          },
        });
        return def;
      }
    </script>
    <script>
      //初始化echarts
      var myChartMap;
      worldMap("china"); //中国地图
      function worldMap(mapName) {
        echartSetOption(mapName); //构建标准分布 echarts
        function echartSetOption(mapName) {
          // 基于准备好的dom，初始化echarts实例
          var myChart = echarts.init(document.getElementById("worldMap"));
          if (myChart != null && myChart != "" && myChart != undefined) {
            myChart.dispose();
          }
          myChart = echarts.init(document.getElementById("worldMap"));

          var itemStyle = {
            normal: {
              borderColor: "rgba(0, 0, 0, 0.2)",
            },
            emphasis: {
              shadowOffsetX: 0,
              shadowOffsetY: 0,
              shadowBlur: 20,
              borderWidth: 0,
              shadowColor: "rgba(0, 0, 0, 0.5)",
            },
          };

          var option = {
            title: {
              text: "2021年各省淡水资源分布",
              left: "center",
              top: "10",
            },
            tooltip: {
              show: true,
              triggerOn: "item",
              // triggerOn:"axis",
              formatter: function (e, t, n) {
                console.log("dsadsads", e);
                var name = e.name;
                var toolipData = [];
                chinaMapHidden(name);
                newMapFu(name);
                p(name);
              },


            },
            length: {
              orient: "vertical",
              left: "left",
              data: ["淡水资源"],
            },

            visualMap: {
              min: 0,
              max: 1000,
              left: "right",
              top: "bottom",
              showLabel: !0,
              text: ["高", "低"],
              calculable: true, //可筛选
              show: false,
              //设置数据颜色
              inRange: {
                color: ["#fff", "rgba(123, 215, 236, 0.837)"],
              },
            },
            selectedMode: "single",
            geo: {
              map: mapName, //"china"
              zoom: 1.25, //当前视角的缩放比例
              roam: false, //是否开启平游或缩放
              scaleLimit: {
                //滚轮缩放的极限控制
                min: 1,
                max: 2,
              },
              // top: 80,
              label: {
                normal: {
                  show: !0,
                  fontSize: "14",
                  color: "rgba(0,0,0,0.7)",
                },
              },
              itemStyle: {
                normal: {
                  borderColor: "rgba(0, 0, 0, 0.2)",
                  areaColor: "rgba(0, 166, 255, 0.779)",
                  color: "#fff",
                },
                emphasis: {
                  areaColor: "#f2d5ad5f",
                  shadowOffsetX: 0,
                  shadowOffsetY: 0,
                  borderWidth: 0,
                  show: true,
                },
              },

        regions: [
        //   {
        //     name: "南海诸岛",
            
        //     itemStyle: {
        //       // 隐藏地图
        //       normal: {
        //         opacity: 0, // 为 0 时不绘制该图形
        //         color:"#fff",
        //       }
        //     },
        //     label: {
        //       show: false, // 隐藏文字
              
        //     }
        //   },
        // //             {
        // //     name: "台湾",
        // //     itemStyle: {
        // //       // 隐藏地图
        // //       normal: {
        // //         opacity: 0, // 为 0 时不绘制该图形
        // //       }
        // //     },
        // //     label: {
        // //       show: false // 隐藏文字
        // //     }
        // //   },
        ],
      },
            series: [
              {
                name: "淡水资源",
                type: "map",
                geoIndex: 0,
                itemStyle: itemStyle,
                showLegendSymbol: true,
                label: {
                  normal: {
                    show: true,
                  },
                  emphasis: {
                    show: true,
                  },
                },
                data: [
                  { name: "北京", value: 35.1 },
                  { name: "上海", value: 61 },
                  { name: "广东", value: 2178.6 },
                  { name: "西藏", value: 500 },
                  { name: "四川", value: 2340.9 },
                  { name: "江西", value: 2221.1 },
                  { name: "湖南", value: 2196.6 },
                  { name: "广西", value: 2178.6 },
                  { name: "福建", value: 2019 },
                  { name: "云南", value: 2088.9 },
                  { name: "湖北", value: 1498 },
                  { name: "浙江", value: 1323.3 },
                  { name: "安徽", value: 1245.2 },
                  { name: "新疆", value: 1093.4 },
                  { name: "贵州", value: 1066.1 },
                  { name: "黑龙江", value: 843.7 },
                  { name: "江苏", value: 741.7 },
                  { name: "青海", value: 612.7 },
                  { name: "重庆", value: 604.9 },
                  { name: "海南", value: 489.8 },
                  { name: "吉林", value: 488.8 },
                  { name: "内蒙古", value: 426.5 },
                  { name: "河南", value: 337.3 },
                  { name: "辽宁", value: 331.6 },
                  { name: "陕西", value: 271.5 },
                  { name: "山东", value: 220.3 },
                  { name: "河北", value: 208.3 },
                  { name: "甘肃", value: 168.4 },
                  { name: "山西", value: 134.1 },
                  { name: "天津", value: 18.9 },
                  { name: "宁夏", value: 9.6 },
                ],
              },
            ],
          };
          // 使用刚指定的配置项和数据显示图表。
          myChart.setOption(option);
          chinaMapHidden(myChart);
          //监听自适应大小
          window.addEventListener("resize", () => {
            myChart.resize();
          });
        }
      }

      function navigateToChemistry(imageIndex) {
            window.location.href = "Chemistry.html?imageIndex=" + imageIndex;
        }
    </script>
  </body>
</html>
